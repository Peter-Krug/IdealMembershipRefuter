{"backend_state":"init","connection_file":"/tmp/xdg-runtime-user/jupyter/kernel-aee4bd4f-e27e-4d10-8ca0-ec2c664658a9.json","kernel":"sage-10.6","kernel_error":"","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"last_backend_state":1749738036828,"last_ipynb_save":1749738038300,"trust":true,"type":"settings"}
{"cell_type":"code","end":1749716605109,"exec_count":13,"id":"d0cdf8","input":"import cvc5\nimport tempfile\nimport subprocess\nimport re","kernel":"sage-10.6","pos":1,"start":1749716605103,"state":"done","type":"cell"}
{"cell_type":"code","end":1749716640884,"exec_count":16,"id":"7728b8","input":"cvc5 --version","kernel":"sage-10.6","output":{"0":{"ename":"TypeError","evalue":"bad operand type for unary -: 'function'","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mTypeError\u001b[0m                                 Traceback (most recent call last)","Cell \u001b[0;32mIn[16], line 1\u001b[0m\n\u001b[0;32m----> 1\u001b[0m cvc5 \u001b[38;5;241m-\u001b[39m\u001b[38;5;241;43m-\u001b[39;49m\u001b[43mversion\u001b[49m\n","\u001b[0;31mTypeError\u001b[0m: bad operand type for unary -: 'function'"]}},"pos":4,"start":1749716640875,"state":"done","type":"cell"}
{"cell_type":"code","end":1749716915982,"exec_count":24,"id":"b60b34","input":"R.<x,y> = PolynomialRing(RR)\npolys = [x^2 + y^2 - 1, x*y - 1]\nprint(solve_with_cvc5_python_api(polys, list(polys[0].parent().gens())))","kernel":"sage-10.6","last":93,"output":{"0":{"ename":"AttributeError","evalue":"'MPolynomial_polydict' object has no attribute 'operator'","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mAttributeError\u001b[0m                            Traceback (most recent call last)","Cell \u001b[0;32mIn[24], line 3\u001b[0m\n\u001b[1;32m      1\u001b[0m R \u001b[38;5;241m=\u001b[39m PolynomialRing(RR, names\u001b[38;5;241m=\u001b[39m(\u001b[38;5;124m'\u001b[39m\u001b[38;5;124mx\u001b[39m\u001b[38;5;124m'\u001b[39m, \u001b[38;5;124m'\u001b[39m\u001b[38;5;124my\u001b[39m\u001b[38;5;124m'\u001b[39m,)); (x, y,) \u001b[38;5;241m=\u001b[39m R\u001b[38;5;241m.\u001b[39m_first_ngens(\u001b[38;5;241m2\u001b[39m)\n\u001b[1;32m      2\u001b[0m polys \u001b[38;5;241m=\u001b[39m [x\u001b[38;5;241m*\u001b[39m\u001b[38;5;241m*\u001b[39mInteger(\u001b[38;5;241m2\u001b[39m) \u001b[38;5;241m+\u001b[39m y\u001b[38;5;241m*\u001b[39m\u001b[38;5;241m*\u001b[39mInteger(\u001b[38;5;241m2\u001b[39m) \u001b[38;5;241m-\u001b[39m Integer(\u001b[38;5;241m1\u001b[39m), x\u001b[38;5;241m*\u001b[39my \u001b[38;5;241m-\u001b[39m Integer(\u001b[38;5;241m1\u001b[39m)]\n\u001b[0;32m----> 3\u001b[0m \u001b[38;5;28mprint\u001b[39m(\u001b[43msolve_with_cvc5_python_api\u001b[49m\u001b[43m(\u001b[49m\u001b[43mpolys\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[38;5;28;43mlist\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43mpolys\u001b[49m\u001b[43m[\u001b[49m\u001b[43mInteger\u001b[49m\u001b[43m(\u001b[49m\u001b[38;5;241;43m0\u001b[39;49m\u001b[43m)\u001b[49m\u001b[43m]\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mparent\u001b[49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43mgens\u001b[49m\u001b[43m(\u001b[49m\u001b[43m)\u001b[49m\u001b[43m)\u001b[49m\u001b[43m)\u001b[49m)\n","Cell \u001b[0;32mIn[21], line 39\u001b[0m, in \u001b[0;36msolve_with_cvc5_python_api\u001b[0;34m(polynomials, variables)\u001b[0m\n\u001b[1;32m     37\u001b[0m \u001b[38;5;66;03m# Assert equations equal to zero\u001b[39;00m\n\u001b[1;32m     38\u001b[0m \u001b[38;5;28;01mfor\u001b[39;00m p \u001b[38;5;129;01min\u001b[39;00m polynomials:\n\u001b[0;32m---> 39\u001b[0m     term \u001b[38;5;241m=\u001b[39m \u001b[43mpolynomial_to_term\u001b[49m\u001b[43m(\u001b[49m\u001b[43mp\u001b[49m\u001b[43m)\u001b[49m\n\u001b[1;32m     40\u001b[0m     zero \u001b[38;5;241m=\u001b[39m solver\u001b[38;5;241m.\u001b[39mmkReal(\u001b[38;5;124m\"\u001b[39m\u001b[38;5;124m0\u001b[39m\u001b[38;5;124m\"\u001b[39m)\n\u001b[1;32m     41\u001b[0m     eq \u001b[38;5;241m=\u001b[39m solver\u001b[38;5;241m.\u001b[39mmkTerm(Kind\u001b[38;5;241m.\u001b[39mEQUAL, [term, zero])\n","Cell \u001b[0;32mIn[21], line 18\u001b[0m, in \u001b[0;36msolve_with_cvc5_python_api.<locals>.polynomial_to_term\u001b[0;34m(expr)\u001b[0m\n\u001b[1;32m     16\u001b[0m \u001b[38;5;28;01mif\u001b[39;00m expr\u001b[38;5;241m.\u001b[39mis_constant():\n\u001b[1;32m     17\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m solver\u001b[38;5;241m.\u001b[39mmkReal(\u001b[38;5;28mstr\u001b[39m(\u001b[38;5;28mfloat\u001b[39m(expr)))\n\u001b[0;32m---> 18\u001b[0m \u001b[38;5;28;01melif\u001b[39;00m \u001b[43mexpr\u001b[49m\u001b[38;5;241;43m.\u001b[39;49m\u001b[43moperator\u001b[49m() \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[1;32m     19\u001b[0m     \u001b[38;5;28;01mreturn\u001b[39;00m var_map[expr]  \u001b[38;5;66;03m# variable\u001b[39;00m\n\u001b[1;32m     20\u001b[0m \u001b[38;5;28;01melse\u001b[39;00m:\n","File \u001b[0;32m/ext/sage/10.6/src/sage/structure/element.pyx:495\u001b[0m, in \u001b[0;36msage.structure.element.Element.__getattr__\u001b[0;34m()\u001b[0m\n\u001b[1;32m    493\u001b[0m         AttributeError: 'LeftZeroSemigroup_with_category.element_class' object has no attribute 'blah_blah'...\n\u001b[1;32m    494\u001b[0m     \"\"\"\n\u001b[0;32m--> 495\u001b[0m     return self.getattr_from_category(name)\n\u001b[1;32m    496\u001b[0m \n\u001b[1;32m    497\u001b[0m cdef getattr_from_category(self, name):\n","File \u001b[0;32m/ext/sage/10.6/src/sage/structure/element.pyx:508\u001b[0m, in \u001b[0;36msage.structure.element.Element.getattr_from_category\u001b[0;34m()\u001b[0m\n\u001b[1;32m    506\u001b[0m     else:\n\u001b[1;32m    507\u001b[0m         cls = P._abstract_element_class\n\u001b[0;32m--> 508\u001b[0m     return getattr_from_other_class(self, cls, name)\n\u001b[1;32m    509\u001b[0m \n\u001b[1;32m    510\u001b[0m def __dir__(self):\n","File \u001b[0;32m/ext/sage/10.6/src/sage/cpython/getattr.pyx:363\u001b[0m, in \u001b[0;36msage.cpython.getattr.getattr_from_other_class\u001b[0;34m()\u001b[0m\n\u001b[1;32m    361\u001b[0m     dummy_error_message.cls = type(self)\n\u001b[1;32m    362\u001b[0m     dummy_error_message.name = name\n\u001b[0;32m--> 363\u001b[0m     raise AttributeError(dummy_error_message)\n\u001b[1;32m    364\u001b[0m attribute = <object>attr\n\u001b[1;32m    365\u001b[0m # Check for a descriptor (__get__ in Python)\n","\u001b[0;31mAttributeError\u001b[0m: 'MPolynomial_polydict' object has no attribute 'operator'"]}},"pos":3,"start":1749716915833,"state":"done","type":"cell"}
{"cell_type":"code","end":1749717722788,"exec_count":37,"id":"adcb68","input":"import cvc5\nfrom cvc5 import Kind\n\nsolver = cvc5.Solver()\nsolver.setOption(\"produce-models\", \"true\");\nrealSort = solver.getRealSort();\nintSort = solver.getIntegerSort();\n\nx = solver.mkConst(realSort, \"x\");\ny = solver.mkConst(realSort, \"y\");\na = solver.mkConst(intSort, \"a\");\nb = solver.mkConst(intSort, \"b\");\n\nzero = solver.mkReal(0);\none = solver.mkReal(1)\n                    \nxPlusY = solver.mkTerm(Kind.ADD, x, y);\nxTimesY = solver.mkTerm(Kind.MULT, x, y);\n                    \nconstraint1 = solver.mkTerm(Kind.LT, zero, x);\nconstraint2 = solver.mkTerm(Kind.LT, zero, y);\nconstraint3 = solver.mkTerm(Kind.LT, xPlusY, one);\nconstraint4 = solver.mkTerm(Kind.EQUAL, x, y);\n\nsolver.assertFormula(constraint1);\nsolver.assertFormula(constraint2);\nsolver.assertFormula(constraint3);\nsolver.assertFormula(constraint4);\n\nr1 = solver.checkSat();\n\nprint(\"result: \", r1)\nxVal = solver.getValue(x);\nyVal = solver.getValue(y);\n\nprint(xVal)\n\nxPy = xVal.getRealValue();\nyPy = yVal.getRealValue();\n\nprint(xPy)","kernel":"sage-10.6","last":17,"output":{"0":{"name":"stdout","text":"result:  sat\n(/ 1 8)\n1/8\n"}},"pos":2,"start":1749717722695,"state":"done","type":"cell"}
{"id":0,"time":1749738037778,"type":"user"}
{"last_load":1749716237714,"type":"file"}